{"version":3,"sources":["fluid-config.js","KeynoteRow.jsx","KeynotesModel.js","Table.jsx","themes.js","index.jsx"],"names":["containerSchema","initialObjects","myMap","SharedMap","connectionConfig","uuid","getRandomName","connection","tenantId","tokenProvider","InsecureTokenProvider","id","orderer","storage","KeynoteRow","props","TextField","onChange","e","setReference","currentTarget","value","reference","placeholder","setText","text","c_NotePrefix","c_ReferencePrefix","Table","fluidContainer","container","React","useState","sharedMap","SetNoteText","noteId","noteText","set","SetNoteReference","Array","from","keys","length","CreateNote","get","NoteIds","filter","key","includes","map","noteIdWithPrefix","substring","setChangeListener","listener","on","createKeynotesModel","model","notes","setNotes","useEffect","syncLocalAndFluidState","noteDataArr","ids","newNoteData","push","note","i","console","log","className","onClick","themeNameToTheme","themeName","lightTheme","darkTheme","createTheme","palette","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","black","white","isInverted","start","a","initializeIcons","getContainerId","isNew","window","location","hash","containerId","client","AzureClient","createContainer","services","attach","getContainer","connected","Promise","resolve","once","ReactDOM","render","StrictMode","ThemeProvider","theme","document","getElementById","catch","error"],"mappings":"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","file":"static/js/main.048d872f.chunk.js","sourcesContent":["import { /*AzureClientProps, AzureFunctionTokenProvider,*/ LOCAL_MODE_TENANT_ID } from \"@fluidframework/azure-client\";\r\nimport { SharedMap } from \"fluid-framework\";\r\nimport { getRandomName } from \"@fluidframework/server-services-client\";\r\nimport { v4 as uuid } from 'uuid';\r\nimport { InsecureTokenProvider } from \"@fluidframework/test-client-utils\";\r\n\r\nexport const containerSchema = {\r\n    initialObjects: { myMap: SharedMap }\r\n  };\r\n\r\nexport const userConfig = {\r\n    id: uuid(),\r\n    name: getRandomName(),\r\n};\r\n\r\n\r\nexport const connectionConfig =\r\n  { \r\n    connection: {\r\n        tenantId: \"b801a86a-3a95-4a4c-883d-edb778658a74\",\r\n        tokenProvider: new InsecureTokenProvider(\"d3a190af6ef61f8f847a7ae40b12d3f4\", { id: \"userId\" }),\r\n        orderer: \"https://alfred.westus2.fluidrelay.azure.com\",\r\n        storage: \"https://historian.westus2.fluidrelay.azure.com\",\r\n    }\r\n}\r\n// { \r\n//     connection: {\r\n//         tenantId: LOCAL_MODE_TENANT_ID,\r\n//         tokenProvider: new InsecureTokenProvider(\"fooBar\", userConfig),\r\n//         orderer: \"http://localhost:7070\",\r\n//         storage: \"http://localhost:7070\",\r\n//     }\r\n// };\r\n","import React from \"react\";\r\nimport { TextField } from \"@fluentui/react\";\r\nimport './App.css'\r\n\r\nexport function KeynoteRow(props) {\r\n    return (\r\n        <tr>\r\n            <td>{props.id}</td>\r\n            <td>\r\n                <TextField \r\n                    onChange={(e) => props.setReference(e.currentTarget.value)}\r\n                    value={props.reference}\r\n                    placeholder={\"key\"}\r\n                />\r\n            </td>\r\n            <td>\r\n                <TextField\r\n                    onChange={(e) => props.setText(e.currentTarget.value)}\r\n                    value = {props.text}\r\n                    placeholder={\"Keynote\"}\r\n                />\r\n            </td>\r\n        </tr>\r\n    );\r\n}","//import { SharedMap } from \"fluid-framework\";\r\n\r\nconst c_NotePrefix = \"text_\";\r\nconst c_ReferencePrefix = \"key_\";\r\n\r\nexport function createKeynotesModel(fluidContainer) {\r\n    \r\n    const sharedMap = fluidContainer.initialObjects.myMap;\r\n\r\n    const SetNoteText = (noteId, noteText) => {\r\n        sharedMap.set(c_NotePrefix + noteId, noteText);\r\n    }\r\n\r\n    const SetNoteReference = (noteId, reference) => {\r\n\r\n        sharedMap.set(c_ReferencePrefix + noteId, reference);\r\n    }\r\n\r\n        // populate table on first run\r\n    if(Array.from(sharedMap.keys()).length === 0) {\r\n        SetNoteText(0, \"note zero\");\r\n        SetNoteReference(0, \"0\");\r\n        SetNoteText(1, \"note one\");\r\n        SetNoteReference(1, \"11\");\r\n        SetNoteText(2, \"note two\");\r\n        SetNoteReference(2, \"22\");\r\n        SetNoteText(3, \"note three\");\r\n        SetNoteReference(3, \"33\");\r\n    }\r\n\r\n    return {\r\n        CreateNote(noteId) {\r\n            const newNote = {\r\n                id: noteId,\r\n                text: sharedMap.get(c_NotePrefix + noteId),\r\n                reference: sharedMap.get(c_ReferencePrefix + noteId)\r\n            };\r\n            return newNote;\r\n        },\r\n\r\n        SetNoteReference,\r\n\r\n        SetNoteText,\r\n\r\n        get NoteIds() {\r\n            const arr = Array.from(sharedMap.keys())\r\n            .filter((key) => key.includes(c_NotePrefix))\r\n            .map((noteIdWithPrefix) => noteIdWithPrefix.substring(c_NotePrefix.length));\r\n            return (arr);\r\n        },\r\n        setChangeListener(listener) {\r\n            sharedMap.on(\"valueChanged\", listener);\r\n        },\r\n\r\n        // removeChangeListener(listener) {\r\n        //     sharedMap.off(\"valueChanged\", listener);\r\n        // }\r\n    }\r\n}","import React from \"react\";\r\nimport {KeynoteRow} from \"./KeynoteRow.jsx\";\r\nimport {createKeynotesModel} from \"./KeynotesModel.js\"\r\nimport \"./App.css\"\r\n\r\nexport function Table(props) {\r\n\r\n    const fluidContainer = props.container;\r\n    const [ model ] = React.useState(createKeynotesModel(fluidContainer));\r\n    const [ notes, setNotes ] = React.useState([]);\r\n\r\n    // runs when model changes\r\n    React.useEffect( () => {\r\n        const syncLocalAndFluidState = () => {\r\n            // construct note array\r\n            const noteDataArr = [];\r\n            const ids = model.NoteIds;\r\n            // recreate the list of keynotes to re-render them via setNotes\r\n            for (let noteId of ids) {\r\n                const newNoteData = model.CreateNote(noteId);\r\n                noteDataArr.push(newNoteData);\r\n            }\r\n            setNotes(noteDataArr);\r\n        }\r\n        // immediately sync model and ui state\r\n        syncLocalAndFluidState();\r\n        // The listener will call syncLocalAndFluidState everytime there a \"valueChanged\" event\r\n        model.setChangeListener(syncLocalAndFluidState);\r\n     }, [model] );\r\n\r\n    const SetNoteText = (id, text) => {\r\n        //console.log(\"setting keynote \"+ id + \" with text: \" + text);\r\n        model.SetNoteText(id, text);\r\n    }\r\n\r\n    const SetNoteReference = (id, reference) => {\r\n        model.SetNoteReference(id, reference);\r\n    }\r\n\r\n    const addRow = () => {\r\n        let id = Array.from(model.NoteIds).length;\r\n        model.SetNoteText(id, \"\");\r\n        model.SetNoteReference(id, \"hi\");\r\n    }\r\n\r\n    return(\r\n        <div>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <td>id</td>\r\n                    <td>Key</td>\r\n                    <td>Note</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {notes.map((note, i) => {\r\n                    const setText = (text) => {\r\n                        SetNoteText(note.id, text);\r\n                    };\r\n                    const setReference = (reference) => {\r\n                        SetNoteReference(note.id, reference);\r\n                    }\r\n                    {console.log(note)}\r\n                    return (\r\n                        <KeynoteRow\r\n                            key={note.id}\r\n                            id={note.id}\r\n                            reference={note.reference}\r\n                            text = {note.text}\r\n                            setText={setText}\r\n                            setReference={setReference}\r\n                        />\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n        <button className=\"add-row-button\" onClick={addRow}><span className=\"material-icons\" >add_circle</span></button>\r\n        </div>\r\n    );\r\n}","import { createTheme } from \"@fluentui/react\";\r\n\r\n\r\nexport function normalizeThemeName(theme?) {\r\n  switch (theme) {\r\n    case \"dark\":\r\n      return \"dark\";\r\n    case \"contrast\":\r\n      return \"contrast\";\r\n    default:\r\n      return \"default\";\r\n  }\r\n}\r\n\r\nexport function themeNameToTheme(themeName) {\r\n  switch (themeName) {\r\n    case \"default\":\r\n      return lightTheme;\r\n    case \"dark\":\r\n      return darkTheme;\r\n    case \"contrast\":\r\n      return darkTheme;\r\n  }\r\n}\r\n\r\nexport const lightTheme = createTheme({\r\n  palette: {\r\n    themePrimary: \"#6264a7\",\r\n    themeLighterAlt: \"#f7f7fb\",\r\n    themeLighter: \"#e1e1f1\",\r\n    themeLight: \"#c8c9e4\",\r\n    themeTertiary: \"#989ac9\",\r\n    themeSecondary: \"#7173b0\",\r\n    themeDarkAlt: \"#585a95\",\r\n    themeDark: \"#4a4c7e\",\r\n    themeDarker: \"#37385d\",\r\n    neutralLighterAlt: \"#faf9f8\",\r\n    neutralLighter: \"#f3f2f1\",\r\n    neutralLight: \"#edebe9\",\r\n    neutralQuaternaryAlt: \"#e1dfdd\",\r\n    neutralQuaternary: \"#d0d0d0\",\r\n    neutralTertiaryAlt: \"#c8c6c4\",\r\n    neutralTertiary: \"#b9b8b7\",\r\n    neutralSecondary: \"#a2a1a0\",\r\n    neutralPrimaryAlt: \"#8b8a89\",\r\n    neutralPrimary: \"#30302f\",\r\n    neutralDark: \"#5e5d5c\",\r\n    black: \"#474645\",\r\n    white: \"#ffffff\",\r\n  },\r\n});\r\n\r\nexport const darkTheme = createTheme({\r\n  isInverted: true,\r\n  palette: {\r\n    themePrimary: \"#6264a7\",\r\n    themeLighterAlt: \"#040407\",\r\n    themeLighter: \"#10101b\",\r\n    themeLight: \"#1d1e32\",\r\n    themeTertiary: \"#3b3c63\",\r\n    themeSecondary: \"#565892\",\r\n    themeDarkAlt: \"#6e70af\",\r\n    themeDark: \"#8183bb\",\r\n    themeDarker: \"#9ea0cd\",\r\n    neutralLighterAlt: \"#000000\",\r\n    neutralLighter: \"#000000\",\r\n    neutralLight: \"#000000\",\r\n    neutralQuaternaryAlt: \"#000000\",\r\n    neutralQuaternary: \"#000000\",\r\n    neutralTertiaryAlt: \"#000000\",\r\n    neutralTertiary: \"#c8c8c8\",\r\n    neutralSecondary: \"#d0d0d0\",\r\n    neutralPrimaryAlt: \"#dadada\",\r\n    neutralPrimary: \"#ffffff\",\r\n    neutralDark: \"#f4f4f4\",\r\n    black: \"#f8f8f8\",\r\n    white: \"#000000\",\r\n  },\r\n});\r\n","import './App.css';\r\n\r\nimport { initializeIcons, ThemeProvider } from \"@fluentui/react\";\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { AzureClient, /*AzureContainerServices */} from '@fluidframework/azure-client';\r\nimport { connectionConfig, containerSchema } from \"./fluid-config\";\r\nimport {Table} from \"./Table.jsx\";\r\nimport { themeNameToTheme } from './themes';\r\n\r\n//const timeKey = \"time-key\";\r\nexport async function start() {\r\n    initializeIcons();\r\n    const getContainerId = () => {\r\n        let isNew = false;\r\n        if (window.location.hash.length === 0) {\r\n            isNew = true;\r\n        }\r\n        const containerId = window.location.hash.substring(1);\r\n        return { containerId, isNew };\r\n    };\r\n\r\n    const { containerId, isNew } = getContainerId();\r\n\r\n    const client = new AzureClient(connectionConfig);\r\n    let container;\r\n    let services;\r\n\r\n    if (isNew) {\r\n        ({ container, services } = await client.createContainer(containerSchema));\r\n        const containerId = await container.attach();\r\n        window.location.hash = containerId;\r\n    } else {\r\n        ({ container, services } = await client.getContainer(containerId, containerSchema));\r\n    }\r\n    if(!services) console.log(\"missing services\");\r\n\r\n    if (!container.connected) {\r\n        await new Promise((resolve) => {\r\n            container.once(\"connected\", () => {\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    ReactDOM.render(\r\n        <React.StrictMode>\r\n            <ThemeProvider theme={themeNameToTheme(\"default\")}>\r\n            <Table container={container}/>\r\n            </ThemeProvider>\r\n        </React.StrictMode>,\r\n        document.getElementById('root')\r\n    )\r\n}\r\n\r\nstart().catch((error) => console.error(error));\r\n"],"sourceRoot":""}